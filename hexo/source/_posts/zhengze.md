---
title: 正则
date: 2017-09-30T13:29:11.000Z
tags:
  - 正则
---
前端老姚出书了，《JavaScript 正则表达式迷你书》问世了！
前端网链接：http://www.qdfuns.com/notes/17398/4580a5084c193248fdb56f32d998802d.html
在此记录下读书的收获。
<!--more-->

> 正则表达式是匹配模式，要么匹配字符，要么匹配位置。
1. 模糊匹配
分为两种：横向模糊和纵向模糊
- 横向模糊指的是，一个正则可匹配的字符串的长度不是固定的，可以是多种情况的。
- 纵向模糊指的是，一个正则匹配的字符串，具体到某一位字符时，它可以不是某个确定的字符，可以有多种
  可能。

> 常见的简写形式
字符组 具体含义
\d      表示 [0-9]。表示是一位数字。
        记忆方式：其英文是 digit（数字）。
\D      表示 [^0-9]。表示除数字外的任意字符。
\w      表示 [0-9a-zA-Z_]。表示数字、大小写字母和下划线。
        记忆方式：w 是 word 的简写，也称单词字符。
\W      表示 [^0-9a-zA-Z_]。非单词字符。
\s      表示 [ \t\v\n\r\f]。表示空白符，包括空格、水平制表符、垂直制表符、换行符、回车符、换页
符。
        记忆方式：s 是 space 的首字母，空白符的单词是 white space。
\S      表示 [^ \t\v\n\r\f]。 非空白符。
.
        表示 [^\n\r\u2028\u2029]。通配符，表示几乎任意字符。换行符、回车符、行分隔符和段分隔符
除外。
        记忆方式：想想省略号 … 中的每个点，都可以理解成占位符，表示任何类似的东西。

> 简写形式
量词 具体含义
{m,}    表示至少出现 m 次。
{m}     等价于 {m,m}，表示出现 m 次。
?       等价于 {0,1}，表示出现或者不出现。
        记忆方式：问号的意思表示，有吗？
+       等价于 {1,}，表示出现至少一次。
        记忆方式：加号是追加的意思，得先有一个，然后才考虑追加。
*       等价于 {0,}，表示出现任意次，有可能不出现。
        记忆方式：看看天上的星星，可能一颗没有，可能零散有几颗，可能数也数不过来。

> 贪婪匹配与惰性匹配
通过在量词后面加个问号就能实现惰性匹配，因此所有惰性匹配情形如下：
惰性量词 贪婪量词
{m,n}?      {m,n}
{m,}?       {m,}
??          ?
+?          +
*?          *

> 分支结构也是惰性的，即当前面的匹配上了，后面的就不再尝试了。
> \b 是单词边界，具体就是 \w 与 \W 之间的位置，也包括 \w 与 ^ 之间的位置，和 \w 与 $ 之间的位置。
> \B 就是 \b 的反面的意思，非单词边界。例如在字符串中所有位置中，扣掉 \b，剩下的都是 \B 的。

>  (?=p) 和 (?!p)
> (?=p)，其中 p 是一个子模式，即 p 前面的位置，或者说，该位置后面的字符要匹配 p。
> 比如 (?=l)，表示 "l" 字符前面的位置，例如：
```js
var result = "hello".replace(/(?=l)/g, '#');
console.log(result);
// => "he#l#lo"
```
> 而 (?!p) 就是 (?=p) 的反面意思，比如：
```js
var result = "hello".replace(/(?!l)/g, '#');
console.log(result);
// => "#h#ell#o#"
```
> 比如 (?=p)，一般都理解成：要求接下来的字符与 p 匹配，但不能包括 p 匹配的那些字符。
> 而在本人看来，(?=p) 就与 ^ 一样好理解，就是 p 前面的那个位置。
> 弄出所有的逗号
  因为逗号出现的位置，要求后面 3 个数字一组，也就是 \d{3} 至少出现一次。
  此时可以使用量词 +：
```js
var result = "12345678".replace(/(?=(\d{3})+$)/g, ',')
console.log(result);
// => "12,345,678
// 数字的长度为3的倍数的时候在前面的位置也会加上逗号。

var regex = /(?!^)(?=(\d{3})+$)/g;
var result = "12345678".replace(regex, ',')
console.log(result);
// => "12,345,678"
result = "123456789".replace(regex, ',');
console.log(result);
// => "123,456,789"

// 多组数字的显示
var string = "12345678 123456789",
regex = /(?!\b)(?=(\d{3})+\b)/g;
var result = string.replace(regex, ',')
console.log(result);
// => "12,345,678 123,456,789"
```
> 货币格式化。
```js
function format (num) {
  return num.toFixed(2).replace(/\B(?=(\d{3})+\b)/, ",").replace(/^/, "$$ ");
};
console.log( format(1888) );
// => "$ 1,888.00"
```

> 验证密码问题
```js
// 至少包括 2 种字符
var regex = /^[0-9A-Za-z]{6,12}$/

// 必须包含数字
var regex = /(?=.*[0-9])^[0-9A-Za-z]{6,12}$/;

// 同时包含数字和小写字母
var regex = /(?=.*[0-9])(?=.*[a-z])^[0-9A-Za-z]{6,12}$/;

// 最终的答案
var regex = /((?=.*[0-9])(?=.*[a-z])|(?=.*[0-9])(?=.*[A-Z])|(?=.*[a-z])(?=.*[AZ]))^[0-9A-Za-z]{6,12}$/;
console.log( regex.test("1234567") ); // false 全是数字
console.log( regex.test("abcdef") ); // false 全是小写字母
console.log( regex.test("ABCDEFGH") ); // false 全是大写字母
console.log( regex.test("ab23C") ); // false 不足6位
console.log( regex.test("ABCDEF234") ); // true 大写字母和数字
console.log( regex.test("abcdEF234") ); // true 三者都有
```

